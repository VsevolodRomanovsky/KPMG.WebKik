<div *ngIf="model" class="container">
    <div class="row">
        <div class="center-block text-center">
            <h3>{{title}}</h3>
        </div>
    </div>
    <form class="form-horizontal" (ngSubmit)="onSubmit()" #formElement="ngForm">
        <div class="form-group">
            <label for="userLogin" class="col-sm-4 control-label">Доменное имя пользователя</label>
            <div class="col-sm-8">
                <input type="text"
                       class="form-control"
                       placeholder="домен\имя"
                       required
                       id="userLogin"
                       name="userLogin"
                       [(ngModel)]="model.UserLogin"
                       (keydown)="onUserLoginChange()"
                       #name="ngModel">
            </div>
        </div>
        <div class="form-group">
            <label for="displayName" class="col-sm-4 control-label">Отображаемое имя</label>
            <div class="col-sm-8">
                <input type="text"
                       class="form-control"
                       placeholder="Имя"
                       id="displayName"
                       name="displayName"
                       [(ngModel)]="model.DisplayName" />
            </div>
        </div>
        <div class="form-group">
            <label for="role" class="col-sm-4 control-label">Роль</label>
            <div class="col-sm-8">
                <select class="form-control" [(ngModel)]="model.Role" id="role" name="role" required>
                    <option [ngValue]="role" *ngFor="let role of roles">{{role.Name}}</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="isDisabled" class="col-sm-4 control-label">Пользователь отключен</label>
            <div class="col-sm-8">
                <input type="checkbox"
                       class="checkbox-inline"
                       id="isDisabled"
                       name="isDisabled"
                       [(ngModel)]="model.IsDisabled" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-4 col-sm-8">
                <button type="submit" class="btn btn-default" [disabled]="!formElement.form.valid">Сохранить</button>
            </div>
        </div>
        <div class="form-group" *ngIf="hasUserExistException">
            <div class="col-sm-12">
                <div class="center-block text-center">
                    <div class="alert alert-danger">
                        Пользователь с таким именем уже существует.
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<preloader *ngIf="isLoading"></preloader>